{% extends "app_Postagem/base.html" %}
{% load static %}

{% block title %}Editar Projeto{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center vh-100" style="background-color: #e9eff5;">
    <div class="bg-white rounded-4 shadow p-5 text-center" style="width: 100%; max-width: 480px;">

        <!-- Título e subtítulo -->
        <h3 class="fw-bold mb-2 text-uppercase" style="color: #0d6efd;">
            Editar Projeto
        </h3>
        <p class="text-muted mb-4">Selecione um projeto e atualize suas informações</p>

        <!-- Seleção do projeto -->
        <form method="GET" class="mb-4 text-start">
            <div class="form-floating mb-3">
                <select name="projeto_id" id="projeto" class="form-select" required>
                    <option value="">-- Selecione um projeto --</option>
                    {% for p in projetos %}
                        <option value="{{ p.id }}" {% if projeto and projeto.id == p.id %}selected{% endif %}>
                            {{ p.titulo }}
                        </option>
                    {% endfor %}
                </select>
                <label for="projeto">Escolha o projeto</label>
            </div>
            <button type="submit" class="btn btn-outline-primary w-100 py-2 rounded-3">
                <i class="bi bi-search"></i> Carregar Projeto
            </button>
        </form>

        {% if projeto %}
        <!-- Formulário de edição -->
        <form method="POST" class="text-start">
            {% csrf_token %}
            <input type="hidden" name="projeto_id" value="{{ projeto.id }}">

            <div class="form-floating mb-3">
                <input type="text" name="titulo" id="titulo" class="form-control"
                       value="{{ projeto.titulo }}" placeholder="Título" required>
                <label for="titulo">Título do Projeto</label>
            </div>

            <div class="form-floating mb-4">
                <textarea name="descricao" id="descricao" class="form-control" style="height: 120px;"
                          placeholder="Descrição" required>{{ projeto.descricao }}</textarea>
                <label for="descricao">Descrição</label>
            </div>

            <div class="d-flex justify-content-between">
                <a href="{% url 'projetos' %}" class="btn btn-secondary w-50 me-2 rounded-3 py-2">
                    Voltar
                </a>
                <button type="submit" class="btn btn-primary w-50 rounded-3 py-2">
                    Salvar
                </button>
            </div>
        </form>
        {% endif %}
    </div>
</div>
{% endblock %}
